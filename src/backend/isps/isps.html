<link rel="import" href="../../../bower_components/polymer/polymer-element.html">

<link rel="import" href="isp.html">

<dom-module id="backend-isps">
  <template>
  </template>

  <script src="isps.js"></script>
  <script>
    class BackendIsps extends Polymer.Element {
      static get is() {
        return 'backend-isps';
      }

      static get properties() {
        return {
          selected: {
            type: Number,
            notify: true
          },
          isps: {
            type: Array,
            notify: true,
            value: function () {
              return []
            }
          },
        };
      }

      ready() {
        super.ready();

        ispsJSON.isps.forEach(isp => {
          this.add(isp);
        });
      }

      add(incomming) {
        var isp = document.createElement("backend-isp");
        isp.id = incomming.id;
        isp.name = incomming.name;
        isp.greeting = incomming.greeting;
        isp.fields = incomming.fields;
        isp.color = incomming.color;
        this.push('isps', isp);
        this.selected = this.isps.length - 1;
      }
    }

    window.customElements.define(BackendIsps.is, BackendIsps);
  </script>
</dom-module>